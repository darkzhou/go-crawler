import{Z as S,p as n,q as l,t as r,x as o,N as _,O as i,Q as f,U as d,S as u,V as x,c as p,y as c,X as C}from"./index-1ddded62.js";import{u as N}from"./4e658170.js";import{f as g}from"./33117849.js";import{_ as $}from"./8025f07a.js";import{_ as V}from"./0b6d9653.js";import{_ as R}from"./9e1e6ef2.js";import"./9b87f773.js";import"./92337dc1.js";const b={key:0,style:{"font-weight":"bold"}},B={key:0},L={key:1},A={key:7},D=c("a",null,"Run",-1),F=c("a",null,"Delete",-1),O={class:"ant-dropdown-link"},j={__name:"SpidersView",emits:["router—change"],setup(T){const y=[{title:"Name",dataIndex:"spider",sorter:(e,t)=>e.spider>t.spider,width:200},{title:"Last Status",dataIndex:"last_status",width:200,filters:[{text:"starting",value:1},{text:"started",value:2},{text:"stopping",value:3},{text:"stopped",value:4}],onFilter:(e,t)=>t.last_status===e},{title:"Last Run At",dataIndex:"last_run_at",width:200,sorter:(e,t)=>e.last_run_at-t.last_run_at},{title:"Last Finish At",dataIndex:"last_finish_at",width:200,sorter:(e,t)=>e.last_finish_at-t.last_finish_at},{title:"Schedule",dataIndex:"schedule",width:100},{title:"Task",dataIndex:"task",width:100},{title:"Record",dataIndex:"record",width:100},{title:"Action",dataIndex:"action",width:200,fixed:"right"}];S([]);const m=N();m.GetSpiders();const I=e=>{switch(e){case 1:return"starting";case 2:return"started";case 3:return"stopping";case 4:return"stopped";default:return"unknown"}};return(e,t)=>{const w=R,h=$,v=V;return n(),l(v,{columns:y,"data-source":o(m).spiders,scroll:{x:"100%"}},{headerCell:r(({column:s})=>[["spider","last_status","last_run_at","last_finish_at"].includes(s.dataIndex)?(n(),_("span",b,i(s.title),1)):f("",!0)]),bodyCell:r(({column:s,record:a})=>[s.key==="spider"?(n(),_("a",B,i(a.spider),1)):s.dataIndex==="last_status"?(n(),_("span",L,[(n(),l(w,{key:a.last_status,color:a.last_status===4?"volcano":a.last_status===2?"green":"geekblue"},{default:r(()=>[d(i(I(a.last_status)),1)]),_:2},1032,["color"]))])):s.dataIndex==="schedule"?(n(),l(o(u),{key:2,to:"/schedules?spider_name="+a.name,onClick:t[0]||(t[0]=k=>e.$emit("router—change","4"))},{default:r(()=>[d(i(a.schedule),1)]),_:2},1032,["to"])):s.dataIndex==="task"?(n(),l(o(u),{key:3,to:"/tasks?spider_name="+a.name,onClick:t[1]||(t[1]=k=>e.$emit("router—change","5"))},{default:r(()=>[d(i(a.task),1)]),_:2},1032,["to"])):s.dataIndex==="record"?(n(),l(o(u),{key:4,to:"/records?spider_name="+a.name,onClick:t[2]||(t[2]=k=>e.$emit("router—change","6"))},{default:r(()=>[d(i(a.record),1)]),_:2},1032,["to"])):s.dataIndex==="last_run_at"?(n(),_(x,{key:5},[d(i(o(g)(a.last_run_at)),1)],64)):s.dataIndex==="last_finish_at"?(n(),_(x,{key:6},[d(i(o(g)(a.last_finish_at)),1)],64)):s.dataIndex==="action"?(n(),_("span",A,[D,p(h,{type:"vertical"}),F,p(h,{type:"vertical"}),c("a",O,[d(" More "),p(o(C))])])):f("",!0)]),_:1},8,["data-source"])}}};export{j as default};
