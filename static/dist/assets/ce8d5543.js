import{s as $,v as w,x as n,y as l,z as o,A as r,B as i,C as g,E as d,D as _,F as y,k as p,G as h,R as c,H as N}from"./index-4b771267.js";import{a as R,f as I}from"./1aa80c10.js";import{_ as B}from"./fa544b21.js";import{_ as V}from"./a9a5de86.js";import{_ as b}from"./cb0a7a19.js";import"./3da183b4.js";const A=$("spiders",()=>{const u=w([]);return{spiders:u,GetSpiders:async()=>{if(u.length===0)return R()}}}),D={key:0,style:{"font-weight":"bold"}},F={key:0},G={key:1},L={key:7},E=h("a",null,"Run",-1),T=h("a",null,"Delete",-1),z={class:"ant-dropdown-link"},P={__name:"SpidersView",emits:["router—change"],setup(u){const m=[{title:"Name",dataIndex:"spider",sorter:(t,e)=>t.spider>e.spider,width:200},{title:"Last Status",dataIndex:"last_status",width:200,filters:[{text:"starting",value:1},{text:"started",value:2},{text:"stopping",value:3},{text:"stopped",value:4}],onFilter:(t,e)=>e.last_status===t},{title:"Last Run At",dataIndex:"last_run_at",width:200,sorter:(t,e)=>t.last_run_at-e.last_run_at},{title:"Last Finish At",dataIndex:"last_finish_at",width:200,sorter:(t,e)=>t.last_finish_at-e.last_finish_at},{title:"Schedule",dataIndex:"schedule",width:100},{title:"Task",dataIndex:"task",width:100},{title:"Record",dataIndex:"record",width:100},{title:"Action",dataIndex:"action",width:200,fixed:"right"}],f=w([]);A().GetSpiders().then(t=>{t.data.data&&t.data.data.forEach(e=>{f.push(e)})});const v=t=>{switch(t){case 1:return"starting";case 2:return"started";case 3:return"stopping";case 4:return"stopped";default:return"unknown"}};return(t,e)=>{const S=b,k=B,C=V;return n(),l(C,{columns:m,"data-source":f},{headerCell:o(({column:s})=>[["spider","last_status","last_run_at","last_finish_at"].includes(s.dataIndex)?(n(),r("span",D,i(s.title),1)):g("",!0)]),bodyCell:o(({column:s,record:a})=>[s.key==="spider"?(n(),r("a",F,i(a.spider),1)):s.dataIndex==="last_status"?(n(),r("span",G,[(n(),l(S,{key:a.last_status,color:a.last_status===4?"volcano":a.last_status===2?"green":"geekblue"},{default:o(()=>[d(i(v(a.last_status)),1)]),_:2},1032,["color"]))])):s.dataIndex==="schedule"?(n(),l(_(c),{key:2,to:"/schedules?spider_name="+a.name,onClick:e[0]||(e[0]=x=>t.$emit("router—change","4"))},{default:o(()=>[d(i(a.schedule),1)]),_:2},1032,["to"])):s.dataIndex==="task"?(n(),l(_(c),{key:3,to:"/tasks?spider_name="+a.name,onClick:e[1]||(e[1]=x=>t.$emit("router—change","5"))},{default:o(()=>[d(i(a.task),1)]),_:2},1032,["to"])):s.dataIndex==="record"?(n(),l(_(c),{key:4,to:"/records?spider_name="+a.name,onClick:e[2]||(e[2]=x=>t.$emit("router—change","6"))},{default:o(()=>[d(i(a.record),1)]),_:2},1032,["to"])):s.dataIndex==="last_run_at"?(n(),r(y,{key:5},[d(i(_(I)(a.last_run_at)),1)],64)):s.dataIndex==="last_finish_at"?(n(),r(y,{key:6},[d(i(_(I)(a.last_finish_at)),1)],64)):s.dataIndex==="action"?(n(),r("span",L,[E,p(k,{type:"vertical"}),T,p(k,{type:"vertical"}),h("a",z,[d(" More "),p(_(N))])])):g("",!0)]),_:1},8,["data-source"])}}};export{P as default};
