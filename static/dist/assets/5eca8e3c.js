import{s as T,v as m,f as x,x as n,A as i,k as d,z as s,F as h,B as r,C as u,E as l,D as c,y as w,G as I,R as b,H as V}from"./index-4b771267.js";import{b as $,f as G}from"./1aa80c10.js";import{_ as K,a as N,T as E}from"./9ef3b56d.js";import{_ as z}from"./a9a5de86.js";import"./3da183b4.js";const A=T("records",()=>{const _=m([]);return{records:_,GetRecords:async()=>{if(_.length===0)return $()}}}),F={key:0,style:{"font-weight":"bold"}},M={key:3},U=["onClick"],P={__name:"RecordsView",emits:["router—change"],setup(_){const f=[{title:"Spider",dataIndex:"spider",width:200},{title:"Task",dataIndex:"task_id",width:300},{title:"Meta",dataIndex:"meta"},{title:"Save Time",dataIndex:"save_time",width:200},{title:"Action",dataIndex:"action",width:200,fixed:"right"}],k=m([]);A().GetRecords().then(a=>{a.data.data&&a.data.data.forEach(t=>{k.push(t)})});const p=x(!1),v=m({}),C=a=>{p.value=!0,v.data=a.data},y=x("1");return(a,t)=>{const R=z,S=N,B=E,D=K;return n(),i(h,null,[d(R,{columns:f,"data-source":k},{headerCell:s(({column:e})=>[["spider"].includes(e.dataIndex)?(n(),i("span",F,r(e.title),1)):u("",!0)]),bodyCell:s(({column:e,record:o})=>[e.dataIndex==="save_time"?(n(),i(h,{key:0},[l(r(c(G)(o.save_time)),1)],64)):u("",!0),e.dataIndex==="spider"?(n(),w(c(b),{key:1,to:"/spiders?name="+o.spider,onClick:t[0]||(t[0]=g=>a.$emit("router—change","3"))},{default:s(()=>[l(r(o.spider),1)]),_:2},1032,["to"])):e.dataIndex==="task_id"?(n(),w(c(b),{key:2,to:"/tasks?id="+o.task_id,onClick:t[1]||(t[1]=g=>a.$emit("router—change","5"))},{default:s(()=>[l(r(o.task_id),1)]),_:2},1032,["to"])):e.dataIndex==="action"?(n(),i("span",M,[I("a",{class:"ant-dropdown-link",onClick:g=>C(o)},[l(" More "),d(c(V))],8,U)])):u("",!0)]),_:1},8,["data-source"]),d(D,{open:p.value,"onUpdate:open":t[3]||(t[3]=e=>p.value=e),size:"large",closable:!1},{default:s(()=>[d(B,{activeKey:y.value,"onUpdate:activeKey":t[2]||(t[2]=e=>y.value=e)},{default:s(()=>[d(S,{key:"1",tab:"Data"},{default:s(()=>[I("pre",null,r(v.data),1)]),_:1})]),_:1},8,["activeKey"])]),_:1},8,["open"])],64)}}};export{P as default};
